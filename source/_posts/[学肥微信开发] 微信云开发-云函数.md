---
title: å¾®ä¿¡äº‘å¼€å‘åŠäº‘å‡½æ•°
date: 2024-11-07 10:18:38
tags: 
    - å¾®ä¿¡
    - å¾®ä¿¡äº‘å¼€å‘
    - äº‘å¼€å‘
    - äº‘å‡½æ•°
    - äº‘æ•°æ®åº“
    - äº‘å­˜å‚¨
categories: å¾®ä¿¡äº‘å¼€å‘
description: "å¦‚æœå¾®ä¿¡å°ç¨‹åºæ˜¯å‰ç«¯ï¼Œé‚£ä¹ˆåç«¯å°±æ˜¯ æœåŠ¡å™¨/åç«¯ä»£ç è¿è¡Œ/äº‘å­˜å‚¨/æ•°æ®åº“ç­‰ï¼Œå‰åç«¯é…åˆæ‰æ˜¯ä¸€ä¸ªå®Œæ•´çš„é¢å‘æœåŠ¡çš„ç¨‹åºã€‚

å‰åç«¯é…ç½®ï¼Œä¸Šè¿°æ˜¯æ­£å¸¸çš„å¼€å‘çš„ç»„åˆã€‚ä½†æ˜¯åç«¯æ¶‰åŠåˆ°å¾ˆå¤šç¹ççš„æ­¥éª¤ï¼Œæ¯”å¦‚ åŸŸåç”³è¯·/åŸŸåè§£æ/åç«¯ä»£ç éƒ¨ç½²...ä¸€ç³»åˆ—çš„é—®é¢˜ã€‚ç­‰è§£å†³å¥½è¿™äº›é—®é¢˜ï¼Œæ—¶é—´éƒ½è€—è´¹äº†åŠå¤©äº†ã€‚

å¾®ä¿¡äº‘å¼€å‘ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚åœ¨ **å¾®ä¿¡å¼€å‘è€…å·¥å…·** ä¸­å°±å¯ä»¥ä¸€é”®å¼€å‘ **æ•°æ®åº“/äº‘å‡½æ•°/äº‘å­˜å‚¨**ï¼Œæ–¹ä¾¿çµæ´»ã€‚"
cover:  https://images.unsplash.com/photo-1685115755599-c47f5a54db76?q=80&w=2231&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D
---


## äº‘å¼€å‘æ˜¯ä»€ä¹ˆ
å¦‚æœå¾®ä¿¡å°ç¨‹åºæ˜¯å‰ç«¯ï¼Œé‚£ä¹ˆåç«¯å°±æ˜¯ æœåŠ¡å™¨/åç«¯ä»£ç è¿è¡Œ/äº‘å­˜å‚¨/æ•°æ®åº“ç­‰ï¼Œå‰åç«¯é…åˆæ‰æ˜¯ä¸€ä¸ªå®Œæ•´çš„é¢å‘æœåŠ¡çš„ç¨‹åºã€‚

å‰åç«¯é…ç½®ï¼Œä¸Šè¿°æ˜¯æ­£å¸¸çš„å¼€å‘çš„ç»„åˆã€‚ä½†æ˜¯åç«¯æ¶‰åŠåˆ°å¾ˆå¤šç¹ççš„æ­¥éª¤ï¼Œæ¯”å¦‚ åŸŸåç”³è¯·/åŸŸåè§£æ/åç«¯ä»£ç éƒ¨ç½²...ä¸€ç³»åˆ—çš„é—®é¢˜ã€‚ç­‰è§£å†³å¥½è¿™äº›é—®é¢˜ï¼Œæ—¶é—´éƒ½è€—è´¹äº†åŠå¤©äº†ã€‚

å¾®ä¿¡äº‘å¼€å‘ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚åœ¨ **å¾®ä¿¡å¼€å‘è€…å·¥å…·** ä¸­å°±å¯ä»¥ä¸€é”®å¼€å‘ **æ•°æ®åº“/äº‘å‡½æ•°/äº‘å­˜å‚¨**ï¼Œæ–¹ä¾¿çµæ´»ã€‚



ç›¸åº”çš„ç½‘ç«™è¯´æ˜ï¼š [äº‘å¼€å‘ ](https://developers.weixin.qq.com/miniprogram/dev/wxcloudservice/wxcloud/guide/init.html)ã€‚ä¸‹é¢å°±ç€ äº‘å‡½æ•°ï¼Œè¯´æ˜ä¸€ä¸‹ã€‚



## äº‘å‡½æ•° hello world
1. æ–°å»ºä¸€ä¸ª **äº‘ç¯å¢ƒ**ï¼Œæ‰“å¼€ _å¾®ä¿¡å¼€å‘è€…å·¥å…·_ï¼Œç‚¹å‡» _äº‘å¼€å‘_ æŒ‰é’®ã€‚

![](https://qiniu.oldzhangtech.com/mdpic/a3303d65-ae28-4a4a-b024-d00ad6ff4095_ff179b1c-7af2-4c3e-90a7-90529e880779.png)

![](https://qiniu.oldzhangtech.com/mdpic/55118c6e-7dd0-4378-aaad-398c8fa4f6f9_d3cdcadd-4568-4b51-81ad-2d66fe249616.png)

çº¢è‰²ç®­å¤´æ˜¯ `envId`ï¼Œåç»­åœ¨ä»£ç ä¸­ç”¨ä¸Šã€‚æš‚æ—¶å…ˆå»ºç«‹ä¸€ä¸ªç¯å¢ƒ `test`ã€‚

> â“ç¯å¢ƒæ˜¯ä»€ä¹ˆï¼Ÿ
>
> å°±æ˜¯ç”¨æ¥éš”ç¦»ä¸åŒ äº‘å‡½æ•°/æ•°æ®åº“/äº‘å­˜å‚¨çš„ ç©ºé—´ã€‚å¯ä»¥æƒ³è±¡ï¼Œä¸åŒçš„ç¯å¢ƒï¼Œå°±ç­‰äºä¸åŒçš„æˆ¿å­ï¼›ä¸åŒçš„æˆ¿å­é‡Œé¢è™½ç„¶éƒ½æœ‰ æ¡Œå­æ¤…å­ï¼Œä½†æ˜¯ä»–ä»¬éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚
>



2. æ–°å»ºç›®å½•ï¼Œ`cloudfunctions` ï¼Œæ˜¯äº‘å‡½æ•°çš„ä¿å­˜ç›®å½•ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰¾åˆ° `project.config.json` æ–‡ä»¶ï¼Œæ–°å¢ `cloudfunctionRoot` å­—æ®µï¼Œ`value` å°±æ˜¯ `cloudfunctions`ã€‚

```javascript
{
   "cloudfunctionRoot": "cloudfunctions/"
}
```

åœ¨ **æ–°å»ºçš„ç›®å½•** ä¸Šè¦é€‰æ‹©ä½ è¦åœ¨ ` å“ªä¸ªç¯å¢ƒ ` ä¸­è¿›è¡Œå¼€å‘äº‘å‡½æ•°ï¼Œæ¯”å¦‚ä¸‹å›¾ï¼Œé€‰æ‹©äº† æ–°å»ºçš„ `test` ç¯å¢ƒã€‚

![](https://qiniu.oldzhangtech.com/mdpic/5bed85c0-d45a-4bc6-84b7-4b3601f05b1d_678f3efa-eef6-4d5d-94a6-f9f2acf75f09.png)



3. åˆ›å»ºäº‘å‡½æ•°ï¼Œåœ¨ `cloudfunctions` ç›®å½• å³é”®ï¼Œç‚¹å‡» ã€æ–°å»º node.js äº‘å‡½æ•°ã€‘ï¼Œåå­—å« `add`ã€‚

![](https://qiniu.oldzhangtech.com/mdpic/1e29e888-7ffc-4c8e-ad45-9211e11c3688_6c840fc5-13f7-4e5e-b1c0-257e5525e4c3.png)

add ç›®å½•ä¸‹ å¢åŠ å¤š 3 ä¸ªæ–‡ä»¶

![](https://qiniu.oldzhangtech.com/mdpic/b062fd6a-be83-4b1f-adaa-abc4b1c445aa_55aae544-8c59-4f95-8fee-fa139fc5b325.png)



4. ä¿®æ”¹ `add/index.js` ï¼Œå…¨æ–‡æ›¿æ¢æˆä¸‹é¢çš„ä»£ç ã€‚

```javascript

// äº‘å‡½æ•°å…¥å£å‡½æ•°
exports.main = async (event, context) => {
  // ...
  return {
    sum: event.a + event.b
  }
}
```



5. ä¿®æ”¹ `package.json`ï¼Œ åˆ é™¤ `dependencies` é‡Œé¢çš„å€¼ï¼Œç±»ä¼¼çš„ä»£ç å¦‚ä¸‹

```javascript
"dependencies": {
    
  }
```



6. ä¸Šä¼ å‡½æ•°ï¼Œå˜æˆ `äº‘`

![](https://qiniu.oldzhangtech.com/mdpic/8677fd70-f4e7-48dc-8151-500ce61fc6c5_2e030105-4f2e-4076-9e42-aa5d749a7d49.png)



> å¦‚æœï¼Œæœ‰ä»¥ä¸‹çš„æƒ…å†µ
>
> 1. `index.js` ä¸­ **æ²¡æœ‰** `const cloud = require('wx-server-sdk')` ä»£ç 
> 2. `package.json` çš„ `dependencies` å­—æ®µ æ²¡æœ‰å€¼
>
> å°±å¯ä»¥  ç‚¹å‡»ã€ä¸Šä¼ å¹¶éƒ¨ç½²: æ‰€æœ‰æ–‡ä»¶ã€‘èœå•ï¼Œæ¯”å¦‚ æœ¬ä¾‹ã€‚
>
> å¦‚æœæœ‰ä¸Šè¿°çš„æƒ…å†µï¼Œå°±å¯ä»¥  ç‚¹å‡»ã€ä¸Šä¼ å¹¶éƒ¨ç½²: äº‘ç«¯å®‰è£…ä¾èµ–ã€‘èœå•ã€‚
>
> ![](https://qiniu.oldzhangtech.com/mdpic/beccdf18-d285-4e40-a6f3-1ab02736ce83_c349e39c-ec34-4d3a-9292-92cbc54a50e9.png)
>





> ğŸ’¡ 'wx-server-sdk' çš„å®‰è£…ï¼Œæ˜¯ä¸ºäº† äº‘å‡½æ•°ä¸­å¯ä»¥ è°ƒç”¨ **æ•°æ®åº“** å’Œ **äº‘å­˜å‚¨**ã€‚å¦‚æœä½ åœ¨å¾®ä¿¡å°ç¨‹åºä¸­æ˜¯ç›´æ¥ è°ƒç”¨ æ•°æ®åº“ å’Œ äº‘å­˜å‚¨ï¼Œå°±æ²¡æœ‰å¿…è¦åœ¨ äº‘å‡½æ•° ä¸­å€’ä¸€å€’äº†ã€‚
>



7. è°ƒè¯•äº‘å‡½æ•°ï¼Œåœ¨ **å¼€å‘è€…å·¥å…·** å°±å¯ä»¥è°ƒè¯•åˆšåˆšä¸Šä¼ çš„äº‘å‡½æ•°

![](https://qiniu.oldzhangtech.com/mdpic/1ae346b2-e450-4d10-b42a-c05843452c69_385b46fd-7871-4826-8fb7-348178fcd442.png)



8. å°ç¨‹åºä¸­è°ƒç”¨ äº‘å‡½æ•° add

```javascript
wx.cloud.init({
      env: 'test-safjlfjasdfasf'
    })

wx.cloud.callFunction({
      // äº‘å‡½æ•°åç§°
      name: 'add',
      // ä¼ ç»™äº‘å‡½æ•°çš„å‚æ•°
      data: {
        a: 1,
        b: 2,
      },
      success: function(res) {
        console.log(res.result.sum) // 3
      },
      fail: console.error
    })
```



9. æ’’èŠ±

## æ€»ç»“

_å¾®ä¿¡äº‘å¼€å‘_ å¼€å‘ _äº‘å‡½æ•°_ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå·¥å…·é‡Œé¢åŒæ—¶å¼€å‘å‰ç«¯å’Œåç«¯çš„ä»£ç ï¼Œå‡å°‘ç¹ççš„æ­¥éª¤ï¼ŒåŠ å¿«å¼€å‘çš„æ•ˆç‡ã€‚

